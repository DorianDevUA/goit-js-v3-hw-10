{"version":3,"file":"01-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nconst refs = {\n  dateTimePicker: document.querySelector('#datetime-picker'),\n  startButton: document.querySelector('button[data-start]'),\n  days: document.querySelector('span[data-days]'),\n  hours: document.querySelector('span[data-hours]'),\n  minutes: document.querySelector('span[data-minutes]'),\n  seconds: document.querySelector('span[data-seconds]'),\n};\n\nlet intervalId = null;\nlet userSelectedDate = null;\n\nrefs.startButton.addEventListener('click', startTimer);\n\ntoggleStartButton(false);\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0].getTime();\n    const isDateInFuture = Date.now() < userSelectedDate;\n\n    if (!isDateInFuture) {\n      iziToast.error({\n        position: 'topRight',\n        title: 'Hey',\n        message: 'Please choose a date in the future',\n      });\n\n      toggleStartButton(false);\n      return;\n    }\n\n    toggleStartButton(true);\n  },\n};\n\nflatpickr(refs.dateTimePicker, options);\n\nfunction startTimer() {\n  if (!intervalId) {\n    toggleDateTimePicker(false);\n    toggleStartButton(false);\n    intervalId = setInterval(updateCountdownTimer, 1000);\n  }\n}\n\nfunction stopTimer() {\n  clearInterval(intervalId);\n  intervalId = null;\n  toggleDateTimePicker(true);\n}\n\nfunction updateCountdownTimer() {\n  const currentTime = Date.now();\n  const deltaTime = userSelectedDate - currentTime;\n\n  if (deltaTime <= 0) {\n    stopTimer();\n    iziToast.success({\n      position: 'topCenter',\n      title: 'Achtung',\n      message: 'Час вийшов!',\n    });\n    return;\n  }\n\n  updateTimerDisplay(convertMs(deltaTime));\n}\n\nfunction updateTimerDisplay({ days, hours, minutes, seconds }) {\n  refs.days.textContent = addLeadingZero(days);\n  refs.hours.textContent = addLeadingZero(hours);\n  refs.minutes.textContent = addLeadingZero(minutes);\n  refs.seconds.textContent = addLeadingZero(seconds);\n}\n\nfunction toggleStartButton(isEnabled) {\n  refs.startButton.disabled = !isEnabled;\n}\n\nfunction toggleDateTimePicker(isEnabled) {\n  refs.dateTimePicker.disabled = !isEnabled;\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return value.toString().padStart(2, '0');\n}\n"],"names":["refs","intervalId","userSelectedDate","startTimer","toggleStartButton","options","selectedDates","iziToast","flatpickr","toggleDateTimePicker","updateCountdownTimer","stopTimer","currentTime","deltaTime","updateTimerDisplay","convertMs","days","hours","minutes","seconds","addLeadingZero","isEnabled","ms","value"],"mappings":"8IAKA,MAAMA,EAAO,CACX,eAAgB,SAAS,cAAc,kBAAkB,EACzD,YAAa,SAAS,cAAc,oBAAoB,EACxD,KAAM,SAAS,cAAc,iBAAiB,EAC9C,MAAO,SAAS,cAAc,kBAAkB,EAChD,QAAS,SAAS,cAAc,oBAAoB,EACpD,QAAS,SAAS,cAAc,oBAAoB,CACtD,EAEA,IAAIC,EAAa,KACbC,EAAmB,KAEvBF,EAAK,YAAY,iBAAiB,QAASG,CAAU,EAErDC,EAAkB,EAAK,EAEvB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQC,EAAe,CAIrB,GAHAJ,EAAmBI,EAAc,CAAC,EAAE,QAAS,EAGzC,EAFmB,KAAK,IAAG,EAAKJ,GAEf,CACnBK,EAAS,MAAM,CACb,SAAU,WACV,MAAO,MACP,QAAS,oCACjB,CAAO,EAEDH,EAAkB,EAAK,EACvB,MACN,CAEIA,EAAkB,EAAI,CACvB,CACH,EAEAI,EAAUR,EAAK,eAAgBK,CAAO,EAEtC,SAASF,GAAa,CACfF,IACHQ,EAAqB,EAAK,EAC1BL,EAAkB,EAAK,EACvBH,EAAa,YAAYS,EAAsB,GAAI,EAEvD,CAEA,SAASC,GAAY,CACnB,cAAcV,CAAU,EACxBA,EAAa,KACbQ,EAAqB,EAAI,CAC3B,CAEA,SAASC,GAAuB,CAC9B,MAAME,EAAc,KAAK,IAAK,EACxBC,EAAYX,EAAmBU,EAErC,GAAIC,GAAa,EAAG,CAClBF,EAAW,EACXJ,EAAS,QAAQ,CACf,SAAU,YACV,MAAO,UACP,QAAS,aACf,CAAK,EACD,MACJ,CAEEO,EAAmBC,EAAUF,CAAS,CAAC,CACzC,CAEA,SAASC,EAAmB,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC7DnB,EAAK,KAAK,YAAcoB,EAAeJ,CAAI,EAC3ChB,EAAK,MAAM,YAAcoB,EAAeH,CAAK,EAC7CjB,EAAK,QAAQ,YAAcoB,EAAeF,CAAO,EACjDlB,EAAK,QAAQ,YAAcoB,EAAeD,CAAO,CACnD,CAEA,SAASf,EAAkBiB,EAAW,CACpCrB,EAAK,YAAY,SAAW,CAACqB,CAC/B,CAEA,SAASZ,EAAqBY,EAAW,CACvCrB,EAAK,eAAe,SAAW,CAACqB,CAClC,CAEA,SAASN,EAAUO,EAAI,CAQrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAE1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EAEpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EAEjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAC1C,CAEA,SAASC,EAAeG,EAAO,CAC7B,OAAOA,EAAM,SAAQ,EAAG,SAAS,EAAG,GAAG,CACzC"}